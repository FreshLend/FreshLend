<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Простой чат с передачей сообщений через куки</title>
<style>
    #chat-box {
        width: 300px;
        height: 200px;
        border: 1px solid #ccc;
        overflow-y: scroll;
        margin-bottom: 10px;
    }
</style>
</head>
<body>

<div id="chat-box"></div>
<input type="text" id="nickname" placeholder="Введите ваш ник">
<input type="text" id="message" placeholder="Введите сообщение">
<button onclick="sendMessage()">Отправить</button>

<script>
    function getCookie(name) {
        var cookieArr = document.cookie.split(';');
        for (var i = 0; i < cookieArr.length; i++) {
            var cookiePair = cookieArr[i].split('=');
            if (name == cookiePair[0].trim()) {
                return decodeURIComponent(cookiePair[1]);
            }
        }
        return null;
    }

    function setCookie(name, value) {
        document.cookie = name + '=' + encodeURIComponent(value);
    }

    function sendMessage() {
        var nickname = document.getElementById('nickname').value;
        var message = document.getElementById('message').value;
        
        if (!nickname || !message) {
            alert('Введите ник и сообщение');
            return;
        }
        
        var chatBox = document.getElementById('chat-box');
        var currentTime = new Date().toLocaleTimeString();
        var chatMessage = currentTime + ' - ' + nickname + ': ' + message + '<br>';
        chatBox.innerHTML += chatMessage;
        document.getElementById('message').value = '';
        
        // Сохраняем сообщение в куки
        var prevMessages = getCookie('messages') || '';
        prevMessages += chatMessage;
        setCookie('messages', prevMessages);
    }

    // При загрузке страницы выводим сохраненные сообщения из куки
    window.onload = function() {
        var savedMessages = getCookie('messages');
        if (savedMessages) {
            document.getElementById('chat-box').innerHTML = savedMessages;
        }
        
        var savedNickname = getCookie('nickname');
        if (savedNickname) {
            document.getElementById('nickname').value = savedNickname;
        }
    };
</script>

</body>
</html>
